data %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1)
data %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
write_tsv("dup_folders.txt")
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
write_tsv("dup_folders.txt")
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup))
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
write_tsv("dup_folders.txt")
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup))
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
write_tsv("dup_folders_2.txt")
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
filter(folder_backup_detected < count_namesize) %>%
write_tsv("dup_folders_2.txt")
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
filter(folder_backup_detected < count_namesize) %>%
filter(!Path %>% str_detect("Attie"))
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
filter(folder_backup_detected < count_namesize) %>%
filter(!Path %>% str_detect("Attie")) %>%
write_tsv("dup_folders_2.txt")
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
write_tsv("dup_folders_2.txt")
mutate(fullpath = paste0(Path,'\',Name))
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
mutate(fullpath = paste0(Path,'\\',Name))
mutate(fullpath = paste0(Path,'\\\',Name))
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
mutate(fullpath = paste0(Path,'\\\\',Name))
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
mutate(fullpath = paste0(Path,'\\',Name))
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
mutate(fullpath = paste0(Path,'\\',Name)) %>%
select(fullpath)
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
mutate(fullpath = paste0(Path,'\\',Name)) %>%
select(fullpath) %>%
pull()
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
mutate(fullpath = paste0(Path,'\\',Name)) %>%
select(fullpath) %>%
pull() %>%
as.list()
folder.remove(folder)
remove.dir(folder)
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
mutate(fullpath = paste0(Path,'\\',Name)) %>%
select(fullpath) %>%
pull()
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
mutate(fullpath = paste0(Path,'\\',Name)) %>%
select(fullpath) %>%
pull() %>%
as.list() %>%
lapply(function(folder){
# unlink(folder, recursive = TRUE)
})
unlink(folder, recursive = TRUE)
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
mutate(fullpath = paste0(Path,'\\',Name)) %>%
select(fullpath) %>%
pull() %>%
unlink( recursive = TRUE)
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
mutate(fullpath = paste0(Path,'\\',Name)) %>%
select(fullpath)
test <-
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
mutate(fullpath = paste0(Path,'\\',Name)) %>%
select(fullpath)
View(test)
test <-
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
mutate(fullpath = paste0(Path,'\\',Name)) %>%
select(fullpath) %>%
pull() %>%
paste0('"',., collapse = '"."')
test
test <-
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
mutate(fullpath = paste0(Path,'\\',Name)) %>%
select(fullpath) %>%
pull() %>%
paste0('"',., collapse = '"."') %>%
# unlink( recursive = TRUE)
write_tsv("to_delete.txt")
test <-
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
mutate(fullpath = paste0(Path,'\\',Name)) %>%
select(fullpath) %>%
pull() %>%
paste0('"',., collapse = '"."') %>%
# unlink( recursive = TRUE)
write_file("to_delete.txt")
test <-
data %>%
mutate(folder_backup = ifelse(Path %>% str_detect("Sauvegarde"), 1, 0)) %>%
group_by(Size) %>%
mutate(count_size = n()) %>%
group_by(Name) %>%
mutate(count_name = n()) %>%
filter(count_size > 1) %>%
filter(count_name > 1)%>%
filter(count_name < 4) %>%
group_by(Size, Name) %>%
mutate(count_namesize = n()) %>%
filter(count_namesize > 1) %>%
mutate(folder_backup_detected = sum(folder_backup)) %>%
ungroup() %>%
filter(folder_backup_detected < count_namesize) %>%
filter(folder_backup_detected > 0) %>%
filter(!Path %>% str_detect("Attie"))  %>%
filter(Path %>% str_detect("Backup")) %>%
mutate(fullpath = paste0(Path,'\\',Name)) %>%
select(fullpath)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
test <-
"sdas2"
knit_with_parameters("C:/Analysis pipelines/AnalysisPipeline_FDSS/FDSS_analysis_script_CompileResults_20231121.rmd")
knit_with_parameters("C:/Analysis pipelines/AnalysisPipeline_FDSS/FDSS_analysis_script_CompileResults_20231121.rmd")
knit_with_parameters("C:/Analysis pipelines/AnalysisPipeline_FDSS/FDSS_analysis_script_CompileResults_20231121.rmd")
setwd("C:/Users/nicol/OneDrive/GitHub_nicolascalo/biomedical_data_pipelines/8_immunogenicity_predictions")
source("C:/Users/nicol/OneDrive/GitHub_nicolascalo/biomedical_data_pipelines/8_immunogenicity_predictions/AnalysisPipeline_Immunogenicity_chEMBL_data_mining_20240528.R", echo = TRUE)
library(tidyverse)
library(readxl)
library(janitor)
library(future.apply)
library(conflicted)
plan(multisession, gc = TRUE, workers = 4)
options(future.globals.maxSize= 18891289600)
conflict_prefer("filter", "dplyr")
conflict_prefer("setdiff", "base")
conflicts_prefer(dplyr::select)
conflicts_prefer(base::setdiff)
conflicts_prefer(base::intersect)
treshold_percent_nonbinder <-
5
treshold_percent_weak <-
2.5
treshold_percent_medium <-
1
